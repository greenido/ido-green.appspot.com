(function(a){a.fn.onePageNav=function(b){var c=a.extend({},a.fn.onePageNav.defaults,b),d={};d.sections={};d.bindNav=function(g,k,j,f,h){var i=g.parent(),e=g.attr("href"),l=a(document);if(!i.hasClass(j)){d.adjustNav(k,i,j);l.unbind(".onePageNav");a.scrollTo(e,h,{onAfter:function(){if(f){window.location.hash=e}l.bind("scroll.onePageNav",function(){d.scrollChange(k,j)})}})}};d.adjustNav=function(g,e,f){a("."+f).removeClass(f);e.addClass(f)};d.getPositions=function(e){a("a[href^='#']").each(function(){var h=a(this).attr("href");var g=a(h).offset(),f=g.top;d.sections[h.substr(1)]=Math.round(f)})};d.getSection=function(h){var e="",g=Math.round(a(window).height()/2);for(var f in d.sections){if((d.sections[f]-g)<h){e=f}}return e};d.scrollChange=function(h,g){d.getPositions(h);var f=a(window).scrollTop(),e=d.getSection(f);if(e!==""){d.adjustNav(h,a("a[href=#"+e+"]").parent(),g)}};d.init=function(f,g){a("a[href^='#']").bind("click",function(h){d.bindNav(a(this),f,g.currentClass,g.changeHash,g.scrollSpeed);h.preventDefault()});d.getPositions(f);var e=false;a(document).bind("scroll.onePageNav",function(){e=true});setInterval(function(){if(e){e=false;d.scrollChange(f,g.currentClass)}},250)};return this.each(function(){var e=a(this),f=a.meta?a.extend({},c,e.data()):c;d.init(e,f)})};a.fn.onePageNav.defaults={currentClass:"current",changeHash:false,scrollSpeed:750}})(jQuery);(function(c){var a=c.scrollTo=function(d,f,g){c(window).scrollTo(d,f,g)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var d=this,f=!d.nodeName||c.inArray(d.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!f){return d}var g=(d.contentWindow||d).document||d.ownerDocument||d;return c.browser.safari||g.compatMode=="BackCompat"?g.body:g.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var n=this,l=c(n),m=f,j,k={},h=l.is("html,body");switch(typeof m){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(m)){m=b(m);break}m=c(m,this);case"object":if(m.is||m.style){j=(m=c(m)).offset()}}c.each(d.axis.split(""),function(q,r){var t=r=="x"?"Left":"Top",s=t.toLowerCase(),v="scroll"+t,p=n[v],g=a.max(n,r);if(j){k[v]=j[s]+(h?0:p-l.offset()[s]);if(d.margin){k[v]-=parseInt(m.css("margin"+t))||0;k[v]-=parseInt(m.css("border"+t+"Width"))||0}k[v]+=d.offset[s]||0;if(d.over[s]){k[v]+=m[r=="x"?"width":"height"]()*d.over[s]}}else{var u=m[s];k[v]=u.slice&&u.slice(-1)=="%"?parseFloat(u)/100*g:u}if(/^\d+$/.test(k[v])){k[v]=k[v]<=0?0:Math.min(k[v],g)}if(!q&&d.queue){if(p!=k[v]){i(d.onAfterFirst)}delete k[v]}});i(d.onAfter);function i(g){l.animate(k,e,d.easing,g&&function(){g.call(this,f,d)})}}).end()};a.max=function(g,j){var n=j=="x"?"Width":"Height",k="scroll"+n;if(!c(g).is("html,body")){return g[k]-c(g)[n.toLowerCase()]()}var o="client"+n,f=g.ownerDocument.documentElement,d=g.ownerDocument.body;return Math.max(f[k],d[k])-Math.min(f[o],d[o])};function b(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be fBound is not callable")}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b?this:a||window,e.concat(Array.prototype.slice.call(arguments)))};b.prototype=this.prototype;c.prototype=new b();return c}}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){window.setTimeout(b,1000/60)}})();var SIGNUP_URL="/signup",ERROR_MSGS={502:"Whoops, that email doesn't look right...",214:"Hey there, looks like we've already got your email address, we'll get you an invite soon.  Promise :)",plain:"Hmmm... something went wrong.  Try again, if you still have problems email blake@getinstinct.com"};var awaitingResponse=false;function renderThanks(){$("#signup_form").hide();$("#signup_thanks").show()}function renderError(b){var a=ERROR_MSGS[b]||ERROR_MSGS.plain;$("#signup_error").html(a);$("#signup_form").removeClass("submitted");$("#signup_submit").val("Submit")}function renderSubmitted(){$("#signup_error").html("");$("#signup_form").addClass("submitted");$("#signup_submit").val("Sending...")}function submitSignup(){if(awaitingResponse){return}awaitingResponse=true;renderSubmitted();$.ajax({url:SIGNUP_URL+"?email="+$("#signup_email").val(),dataType:"json",success:function(a){if(typeof a=="object"&&a.code){renderError(a.code)}else{renderThanks()}awaitingResponse=false},error:function(a){renderError();awaitingResponse=false}});return false}$(document).ready(function(){$("#signup_email").focus(function(){if($(this).val()=="Email Address"){$(this).val("")}});$("#signup_email").blur(function(){if($(this).val()==""){$(this).val("Email Address")}});$("#signup_form").bind("submit",submitSignup);$("#nav_menu").onePageNav({currentClass:"nav_selected",changeHash:false,scrollSpeed:500})});